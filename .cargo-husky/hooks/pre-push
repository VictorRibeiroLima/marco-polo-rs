#!/bin/sh
#
# This hook was set by cargo-husky v1.0.0: https://github.com/rhysd/cargo-husky#readme
# Generated by script /path/to/cargo-husky/build.rs
# Output at /path/to/target/debug/build/cargo-husky-xxxxxx/out
#

# Run SQLx prepare
cargo sqlx prepare --merged

# Stage the generated file
git add sqlx-data.json

# Check if there are changes to commit
if [ -n "$(git status --porcelain)" ]; then
  # Commit the changes
  git commit -m "chore: Generated SQLx file"
fi